<h1 class="cd-header">Choose an Equity Linked CD</h1>
<h5 class="cd-sub-header">
  Each CD is linked to the performance of a specific market index
</h5>

<!-- <div class="calculator-box">
  <div class="calc">
    <mat-slider
      thumbLabel
      [displayWith]="formatLabel"
      tickInterval="1000"
      step="1000"
      [min]="minDeposit"
      max="100000"
      aria-label="units"
      #currentValue
      (change)="sliderCalc(currentValue, termLength, interestRate)"
      [(ngModel)]="value"
    >
    </mat-slider>
    <h2 class="term-calc-header">CD Term: {{ termLength }} months</h2>

    <h2 class="term-calc-header">Interest Rate: {{ interestRate }}%</h2>

    <h2 class="term-calc-header">
      End Balance: {{ calculatedReturn | currency }}
    </h2>
  </div>
</div> -->

<!-- <div class="img-box">
  <img src="https://th.bing.com/th/id/R.065af4915a54436fda20fb3b7cdc2b74?rik=YA9ywBPENAtdmA&riu=http%3a%2f%2fassets.nerdwallet.com%2fblog%2fwp-content%2fuploads%2f2014%2f01%2fCD-certificate-deposit-story.jpg&ehk=UDbD1QAKEvcFit5wthvWqu6CS8GGic%2f3LbanXHpW7sc%3d&risl=&pid=ImgRaw&r=0" alt="Italian Trulli">
</div> -->

<div class="card-container">
  <mat-card class="example-card" *ngFor="let cd of cds; let i = index">
    <mat-card-title>{{ cd.elcd?.name }}</mat-card-title>
    <mat-card-subtitle>Stock Index</mat-card-subtitle>
    <mat-card-content>
      <p class="details">
        Minimum Deposit: {{ cd.minimumOpeningDeposit | currency }}
      </p>
      <p class="details">Term: {{ cd.term }} months</p>
      <p class="details">Interest Rate: {{ cd.interestRate }}%</p>
    </mat-card-content>
    <mat-card-actions>
      <!-- <button
        (click)="xferData(cd.minimumOpeningDeposit, cd.term, cd.interestRate)"
        class="cd-details"
        mat-button
      >
        CALCULATE
      </button> -->
      <button
        class="btn btn-primary"
        mat-button
        (click)="openPopup(cd.term, cd.interestRate, cd.minimumOpeningDeposit)"
      >
        OPEN CD
      </button>
    </mat-card-actions>
  </mat-card>

  <h2 class="cd-sub-header">{{ alertMessage }}</h2>

  <div
    *ngFor="let cd of cds; let i = index"
    class="modal"
    tabindex="-1"
    role="dialog"
    [ngStyle]="{ display: displayStyle }"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-body">
          <p class="details">How Much Would You Like to Deposit?</p>
          <input
            #modalValue
            id="takeInput"
            type="number"
            class="opening-deposit"
            (input)="updateDeposit($event)"
            placeholder="{{ userDepositInput | currency }}"
          />
          <p class="details">
            Opening Deposit: {{ userDepositInput | currency }}
          </p>
          <p class="details">Term: {{ termLength }} months</p>
          <p class="details">Interest Rate: {{ interestRate }}%</p>
        </div>
        <div class="modal-footer">
          <p class="error-message" *ngIf="valid">
            Deposit for this CD must be at least {{ minDeposit | currency }}
          </p>
          <button
            (click)="buyCD(i)"
            (click)="reset(modalValue)"
            type="button"
            class="btn btn-primary mod-btn"
          >
            BUY CD
          </button>
          <button
            type="button"
            class="btn btn-primary"
            (click)="reset(modalValue)"
            (click)="closePopup()"
          >
            CLOSE
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
